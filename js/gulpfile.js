var obj=[{img:"img/1.png",name:"百度",place:"北京市海淀区西北旺",con:"互联网|以上市|100000人以上",cons:"前端工程师",num:"2382"},{img:"img/2.png",name:"北京来威科技",place:"北京市昌平区沙河",con:"IT软件|微融资|100-499人",cons:"前端开发工程师",num:"164"},{img:"img/3.png",name:"最苦教育",place:"北京市海淀区五棵松",con:"互联网|A轮|20-99人",cons:"web前端开发工程师",num:"12"},{img:"img/4.png",name:"京东科技",place:"北京市大兴区",con:"移动互联网|以上市|100000人以上",cons:"webGL",num:"55"}],gulp=require("gulp"),webserver=require("gulp-webserver"),connect=require("gulp-connect"),urlTool=require("url"),qs=require("qs"),htmlmin=require("gulp-htmlmin"),uglify=require("gulp-uglify"),yscss=require("gulp-minify-css");gulp.task("mockServer",function(){gulp.src(".").pipe(webserver({port:3e3,middleware:function(e,s,n){var i=e.method,r=urlTool.parse(e.url).pathname;if(s.setHeader("Access-Control-Allow-Origin","*"),"GET"==i)switch(r){case"/goodslist":s.setHeader("content-type","application/json;charset=utf-8"),s.write(JSON.stringify(obj)),s.end()}else if("POST"==i){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){var e=-1!=t.indexOf("{")&&-1!=t.indexOf("}")?JSON.parse(t):qs.parse(t);switch(r){case"/login":"张三"==e.userName&&e.password}})}}}))}),gulp.task("httpServer",function(){connect.server({port:8080,livereload:!0})}),gulp.task("default",["mockServer","httpServer"]),gulp.task("yshtml",function(){console.log(111),gulp.src("./index.html").pipe(htmlmin({removeComments:!0,collapseWhitespace:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyJS:!0,minifyCSS:!0})).pipe(gulp.dest("./html"))}),gulp.task("ysjs",function(){console.log(222),gulp.src("./*.js").pipe(uglify()).pipe(gulp.dest("js"))}),gulp.task("yscss",function(){console.log(333),gulp.src(["./*/*.css","./*.css"]).pipe(yscss()).pipe(gulp.dest("css"))}),gulp.task("total",["yshtml","ysjs","yscss"]);